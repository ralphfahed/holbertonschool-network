#!/usr/bin/env bash

# Must be run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Backup original hosts file
cp /etc/hosts /etc/hosts.bak

# Remove existing lines containing localhost or facebook.com and write to temp file
grep -vE 'localhost|facebook.com' /etc/hosts > /tmp/hosts.new

# Append new mappings
echo "127.0.0.2 localhost" >> /tmp/hosts.new
echo "8.8.8.8 facebook.com" >> /tmp/hosts.new

# Move temp file back to /etc/hosts (overwrite)
mv /tmp/hosts.new /etc/hosts
